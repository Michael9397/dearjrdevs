<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="description" content="This technique can save some embarrassment.">

        <meta property="og:title" content="How to update a function | Dear Jr. Devs"/>
        <meta property="og:type" content="article" />
        <meta property="og:url" content="https://jigsaw-blog-template.tighten.co/blog/how-to-update-a-function"/>
        <meta property="og:description" content="This technique can save some embarrassment." />

        <title>How to update a function | Dear Jr. Devs</title>

        <link rel="home" href="https://jigsaw-blog-template.tighten.co">
        <link rel="icon" href="/favicon.ico">
        <link href="/blog/feed.atom" type="application/atom+xml" rel="alternate" title="Dear Jr. Devs Atom Feed">

                    <!-- Insert analytics code here -->
                <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="/assets/build/css/main.css?id=0e947a0f09d38580f3f83d553331ebae">
    </head>

    <body class="flex flex-col justify-between min-h-screen bg-gray-100 text-gray-800 leading-normal font-sans">
        <header class="flex items-center shadow bg-white border-b h-24 py-4" role="banner">
            <div class="container flex items-center max-w-8xl mx-auto px-4 lg:px-8">
                <div class="flex items-center">
                    <a href="/" title="Dear Jr. Devs home" class="inline-flex items-center">


                        <h1
                            class="text-lg md:text-3xl text-blue-800 font-bold hover:text-blue-800 my-0"
                            style="font-family: 'Dancing Script', cursive;"
                        >Dear Jr. Devs</h1>
                    </a>
                </div>

                <div id="vue-search" class="flex flex-1 justify-end items-center">
                    <search></search>

                    <nav class="hidden lg:flex items-center justify-end text-lg">
    <a title="Dear Jr. Devs Blog" href="/blog"
        class="ml-6 text-gray-700 hover:text-blue-600 ">
        Letters
    </a>

    <a title="Dear Jr. Devs About" href="/why"
        class="ml-6 text-gray-700 hover:text-blue-600 ">
        Why?
    </a>

    <a title="Dear Jr. Devs Contact" href="/who"
        class="ml-6 text-gray-700 hover:text-blue-600 ">
        Who made this?
    </a>
</nav>

                    <button class="flex justify-center items-center bg-blue-500 border border-blue-500 h-10 px-5 rounded-full lg:hidden focus:outline-none"
    onclick="navMenu.toggle()"
>
    <svg id="js-nav-menu-show" xmlns="http://www.w3.org/2000/svg"
        class="fill-current text-white h-9 w-4" viewBox="0 0 32 32"
    >
        <path d="M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z"/>
    </svg>

    <svg id="js-nav-menu-hide" xmlns="http://www.w3.org/2000/svg"
        class="hidden fill-current text-white h-9 w-4" viewBox="0 0 36 30"
    >
        <polygon points="32.8,4.4 28.6,0.2 18,10.8 7.4,0.2 3.2,4.4 13.8,15 3.2,25.6 7.4,29.8 18,19.2 28.6,29.8 32.8,25.6 22.2,15 "/>
    </svg>
</button>

                </div>
            </div>
        </header>

        <nav id="js-nav-menu" class="w-auto px-2 pt-6 pb-2 bg-gray-200 shadow hidden lg:hidden">
    <ul class="my-0">
        <li class="pl-4">
            <a
                title="Dear Jr. Devs Blog"
                href="/blog"
                class="block mt-0 mb-4 text-sm no-underline text-gray-800 hover:text-blue-500"
            >Blog</a>
        </li>
        <li class="pl-4">
            <a
                title="Dear Jr. Devs About"
                href="/about"
                class="block mt-0 mb-4 text-sm no-underline text-gray-800 hover:text-blue-500"
            >About</a>
        </li>
        <li class="pl-4">
            <a
                title="Dear Jr. Devs Contact"
                href="/contact"
                class="block mt-0 mb-4 text-sm no-underline text-gray-800 hover:text-blue-500"
            >Contact</a>
        </li>
    </ul>
</nav>

        <main role="main" class="flex-auto w-full container max-w-4xl mx-auto py-16 px-6">
                        <img src="/assets/img/planning.png" alt="How to update a function cover image" class="mb-2">
    
    <h1 class="leading-none mb-2">How to update a function</h1>

    <p class="text-gray-700 text-xl md:mt-0">Michael Claar    •  May 24, 2022</p>

                        <a
                href="/blog/categories/code-quality"
                title="View posts in code-quality"
                class="inline-block bg-gray-300 hover:bg-blue-200 leading-loose tracking-wide text-gray-800 uppercase text-xs font-semibold rounded mr-4 px-3 pt-px"
            >code-quality</a>
            
    <div class="border-b border-blue-200 mb-10 pb-4" v-pre>
        <p>Pretend there is a table of calendar events on your website that is driven by JavaScript.  Turns out this calendar is getting too long to be read easily and something needs to change.  The change is going to be tabs that when people click on them filter the results to a category of the calendar.  You start doing your research and come across this function.</p>

<pre><code class="language-jsx">const buildCalendarRecords = (data =&gt; {
    return data.calendar.map(row =&gt; {
            return {
                 event: row.title,
                 startDate: row.start_date,
                 endDate: row.end_date,
           type: row.is_virtual
            }
  });
});
</code></pre>

<p>After you look through the code and understand how things are passed back and forth you decide this is the right place to add your changes.  There is a key principle here that save you from a few potential headaches.  Don’t change the functionality for the basic use case.  Another way of saying it is that everywhere this function is already used should work the same way when you are done with it.  Only when you pass in new arguments, should it change.   If it works different in other places and gets through your company’s QA/testing process, it will usually be found by a customer who needed something to be different and the pressure will be on at that point to fix it quickly.</p>

<p>Let’s start with the wrong approach.</p>

<pre><code class="language-jsx">const buildCalendarRecords = ((data, flag) =&gt; {
    return data.calendar
        .filter(row =&gt; data.category === flag)
        .map(row =&gt; {
            return {
                 event: row.title,
                 startDate: row.start_date,
                 endDate: row.end_date,
           type: row.is_virtual
            }
  });
});
</code></pre>

<p>In this solution, you have left a clean looking answer.  You click all of your new tabs and see that only the records you want to show are populating on each tab.  You triumphantly send it to your boss not realizing the issue you’ve unleashed.  Hopefully your boss reads it and sends it back saying “Hey, when I load the full calendar, I’m getting an error. The tabs work, but the full calendar doesn’t anymore.”</p>

<p>Okay, fine you realize you need to handle a case where nothing is filtered.  You go back to work…</p>

<pre><code class="language-jsx">const buildCalendarRecords = ((data, flag) =&gt; {
  let records = data.calendar
  if (flag !== 'all') {
        records = records.filter(row =&gt; data.category === flag)
  }

    return records.map(row =&gt; {
        return {
             event: row.title,
             startDate: row.start_date,
             endDate: row.end_date,
       type: row.is_virtual
        }
  });
});
</code></pre>

<p>Fine, it’s not as pretty, but you pass a flag all for the main calendar implementation and send it back to your boss.  Thankfully he checks again and sends it back to you saying “That page is working fine now but the other page that uses <code>buildCalendarRecords()</code> are still broken.</p>

<p>It could be easy to blame the boss for not filling you in on the implications of your code, but really the principle we are discussing today would save you from all of the pain.  If they had a better testing policy, this would never have happened.  If it works the same as it did for it’s normal use case, you don’t have to worry about other places it’s being used.  The crazy thing is one minor change fixes it.</p>

<pre><code class="language-jsx">const buildCalendarRecords = ((data, flag = "all") =&gt; {
  let records = data.calendar
  if (flag !== 'all') {
        records = records.filter(row =&gt; data.category === flag)
  }

    return records.map(row =&gt; {
        return {
             event: row.title,
             startDate: row.start_date,
             endDate: row.end_date,
       type: row.is_virtual
        }
  });
});
</code></pre>

<p>By adding a default value for your new value and carefully coding, the path works the same as it did before by default.  This might be worthy of another letter later, but there is a point to where it gets too ugly and you need to refactor rather than using the existing functionality.  But learning this technique can save you from looking foolish early on and it’s not something you naturally see when work on solo projects.</p>
    </div>

    <nav class="flex justify-between text-sm md:text-base">
        <div>
                            <a href="https://jigsaw-blog-template.tighten.co/blog/what-did-you-intend-pt-2" title="Previous Post: What did you intend? Pt. 2">
                    &LeftArrow; What did you intend? Pt. 2
                </a>
                    </div>

        <div>
                            <a href="https://jigsaw-blog-template.tighten.co/blog/what-did-you-intend-pt-3" title="Next Post: What did you intend? Pt. 3">
                    What did you intend? Pt. 3 &RightArrow;
                </a>
                    </div>


    </nav>
        </main>

        <footer class="bg-white text-center text-sm mt-12 py-4" role="contentinfo">
            <ul class="flex flex-col md:flex-row justify-center list-none">
                <li class="md:mr-2">
                    Thanks to <a href="https://tighten.co" title="Tighten website">Tighten</a> for the easy set up of this Blog through their free Jigsaw product.
                </li>




                <li>
                    Built with <a href="http://jigsaw.tighten.co" title="Jigsaw by Tighten">Jigsaw</a>
                    and <a href="https://tailwindcss.com" title="Tailwind CSS, a utility-first CSS framework">Tailwind CSS</a>.
                </li>
            </ul>
        </footer>

        <script src="/assets/build/js/main.js?id=166201f565542d85dddbffacbe5e7fa5"></script>

        <script>
    const navMenu = {
        toggle() {
            const menu = document.getElementById('js-nav-menu');
            menu.classList.toggle('hidden');
            menu.classList.toggle('lg:block');
            document.getElementById('js-nav-menu-hide').classList.toggle('hidden');
            document.getElementById('js-nav-menu-show').classList.toggle('hidden');
        },
    }
</script>
    </body>
</html>
